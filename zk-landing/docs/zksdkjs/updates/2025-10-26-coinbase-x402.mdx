---
title: zkSDK x402 Integration - Micropayments for Privacy Services
authors: [zkSDK Team]
tags: [payments, micropayments, privacy, x402, integration]
---

# zkSDK x402 Integration: Micropayments for Privacy Services

We're excited to announce the integration of Coinbase's **x402 payments protocol** into zkSDK, bringing seamless micropayment capabilities to privacy-preserving applications and AI agents.

## What is x402?

[x402](https://github.com/coinbase/x402) is an open, internet-native micropayments protocol developed by Coinbase that enables one-line integrations for accepting digital dollars. With features like:

- **Sub-cent precision**: Payments as low as $0.001
- **Zero fees**: No platform fees for resource servers
- **Fast settlement**: 2-second blockchain confirmations
- **Multi-chain support**: Works across EVM, Solana, and soon Sui
- **HTTP native**: Built on the standard HTTP 402 Payment Required status code

```typescript
// One line to protect your API with payments
app.use(paymentMiddleware('0xYourAddress', { '/api/*': '$0.001' }));
```

## Why Integrate x402 with zkSDK?

The integration brings compelling value to the zkSDK ecosystem:

### For Privacy Service Developers
- **Monetize privacy features** without complex payment infrastructure
- **Standardized integration patterns** that work across all zkSDK providers
- **Reduced friction** for users to pay for privacy services
- **Cross-chain payment compatibility** matching zkSDK's multi-chain vision

### For End Users
- **Micro-payments** for privacy features without large upfront costs
- **Transparent pricing** with clear payment requirements
- **Fast settlement times** with 2-second blockchain confirmations
- **Familiar payment UX** that works with existing wallets

### For AI Agents
- **Autonomous resource payment** capabilities for privacy services
- **Seamless integration** with zkSDK's privacy workflows
- **Programmable spending controls** and budget management
- **Audit trail** for compliance and expense tracking

## Integration Highlights

### Unified Payment API
zkSDK now provides a consistent interface for x402 payments across all supported chains:

```typescript
// Create payments using the unified zkSDK interface
await zkSDK.transfer({
  chain: 'base',
  token: 'USDC',
  amount: '1000', // 0.001 USDC
  to: '0x...',
  privacy: 'shielded',
  payment: {
    scheme: 'exact',
    resource: 'https://api.example.com/service'
  }
});
```

### Privacy-Enhanced Payments
Leverage zkSDK's privacy capabilities for enhanced payment privacy:

- **FHE-encrypted payment amounts** using Zama's FHEVM
- **Shielded payment workflows** with Aztec and Railgun
- **Confidential pricing discovery** for privacy-preserving services
- **Zero-knowledge payment verification** for maximum privacy

### AI Agent Integration
Enable autonomous payment capabilities for AI agents:

```typescript
// AI agents can now make autonomous payment decisions
const agent = new PaymentCapableAgent(1.00); // $1.00 budget
const result = await agent.makePaymentRequest('https://api.privacy-service.com/data');
```

## Technical Architecture

The integration follows zkSDK's modular provider pattern:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              APPLICATION LAYER                 â”‚
â”‚  (Frontend, Backend, AI Agents)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   @zksdk/core  â”‚
              â”‚   ZkSDK Class  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ @zksdk/providers â”‚ â”‚ @zksdk/    â”‚ â”‚ @zksdk/        â”‚
â”‚     /x402      â”‚ â”‚ middleware â”‚ â”‚ providers/*    â”‚
â”‚                â”‚ â”‚            â”‚ â”‚ (privacy)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Supported Chains
- **EVM Chains**: Ethereum, Base, Polygon, Arbitrum via EIP-3009
- **SVM Chains**: Solana via partially signed transactions
- **Planned**: Sui integration (following x402 protocol development)

## Getting Started

### Installation
```bash
npm install @zksdk/core @zksdk/providers/x402
```

### Basic Setup
```typescript
import { ZkSDK } from '@zksdk/core';
import { X402Provider } from '@zksdk/providers/x402';

const sdk = new ZkSDK({
  providers: {
    x402: new X402Provider()
  }
});

await sdk.getProvider('x402').initialize({
  facilitatorUrl: 'https://facilitator.x402.org',
  defaultNetwork: 'base'
});
```

### Protecting Your API
```typescript
import express from 'express';
import { paymentMiddleware } from '@zksdk/middleware';

const app = express();

app.use(paymentMiddleware(
  '0xYourWalletAddress',
  {
    '/api/premium': {
      price: '$0.001',
      network: 'base',
      config: {
        description: 'Premium API access',
        mimeType: 'application/json'
      }
    }
  }
));

app.get('/api/premium', (req, res) => {
  res.json({ data: 'Protected premium content' });
});
```

## Roadmap

### Phase 1: Core Integration (Complete)
- âœ… x402 provider integrated into zkSDK core
- âœ… EVM payment creation and verification working
- âœ… SVM payment creation and verification working
- âœ… Basic wallet integration complete

### Phase 2: Privacy Enhancements (In Progress)
- ï¿½æ­£åœ¨ FHE-encrypted payment amounts
- ï¿½æ­£åœ¨ Aztec shielded payment workflows
- ï¿½æ­£åœ¨ Privacy-preserving pricing discovery
- ï¿½æ­£åœ¨ Integration with zkSDK privacy providers

### Phase 3: AI Agent Features (Planned)
- ðŸ“… Autonomous payment decision engine
- ðŸ“… Budget management and spending controls
- ðŸ“… Agent-to-agent payment protocol
- ðŸ“… Multi-agent payment coordination

## Benefits for the Ecosystem

### For Developers
- **Simplified monetization** of privacy services with one-line integration
- **Standardized payment patterns** that work across all privacy protocols
- **Reduced infrastructure costs** with zero platform fees
- **Cross-chain compatibility** matching modern development needs

### For Privacy Protocols
- **New revenue streams** for privacy service providers
- **Standardized payment interface** that works across protocols
- **Enhanced user experience** with familiar payment workflows
- **Reduced development overhead** for payment integration

### For the Community
- **Innovation in privacy economics** with practical monetization models
- **Democratized access** to privacy services through micro-payments
- **Sustainable development** of open-source privacy tools
- **Ecosystem growth** through economic incentives

## Try It Today

The x402 integration is available in zkSDK v1.2.0:

```bash
npm install @zksdk/core@latest @zksdk/providers/x402@latest
```

Check out our [integration examples](https://github.com/zksdkjs/zkSDKjs/tree/main/examples) and [documentation](https://docs.zksdk.dev/docs/integrations/x402) to get started.

## Join the Conversation

We're excited to see how the community leverages x402 payments for privacy services. Share your implementations, ask questions, or contribute to the development:

- **GitHub**: [zksdkjs/zkSDKjs](https://github.com/zksdkjs/zkSDKjs)
- **Discord**: zkSDK Development Channel
- **Twitter**: [@zksdkjs](https://twitter.com/zksdkjs)

---

*The zkSDK Team is committed to making privacy accessible to all developers. With x402 integration, we're taking another step toward that vision by enabling sustainable economic models for privacy services.*

*Build. Pay. Privacy. All with one SDK.*
